openapi: 3.0.3
info:
  title: Todo List API
  description: RESTful API cho h·ªá th·ªëng qu·∫£n l√Ω todo list c∆° b·∫£n
  version: 1.0.0
  contact:
    name: Todo System Team

servers:
  - url: http://localhost:8000/api/v1
    description: Local development server
  - url: https://api.example.com/api/v1
    description: Production server

tags:
  - name: Todos
    description: Todo CRUD operations

paths:
  /todos:
    get:
      summary: L·∫•y danh s√°ch t·∫•t c·∫£ todos
      description: Tr·∫£ v·ªÅ danh s√°ch t·∫•t c·∫£ todo items c·ªßa ng∆∞·ªùi d√πng
      operationId: listTodos
      tags:
        - Todos
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TodoListResponse'
              examples:
                withTodos:
                  summary: C√≥ todos
                  value:
                    success: true
                    data:
                      - id: 1
                        title: "Mua s·ªØa"
                        completed: false
                        created_at: "2026-02-10T10:00:00Z"
                        updated_at: "2026-02-10T10:00:00Z"
                      - id: 2
                        title: "H·ªçc Laravel"
                        completed: true
                        created_at: "2026-02-10T09:00:00Z"
                        updated_at: "2026-02-10T11:30:00Z"
                    message: "Todos retrieved successfully"
                emptyList:
                  summary: Danh s√°ch tr·ªëng
                  value:
                    success: true
                    data: []
                    message: "No todos found"

    post:
      summary: T·∫°o todo m·ªõi
      description: T·∫°o m·ªôt todo item m·ªõi v·ªõi ti√™u ƒë·ªÅ ƒë∆∞·ª£c cung c·∫•p
      operationId: createTodo
      tags:
        - Todos
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTodoRequest'
            examples:
              validTodo:
                summary: Todo h·ª£p l·ªá
                value:
                  title: "Ho√†n th√†nh project"
              withEmoji:
                summary: Todo v·ªõi emoji
                value:
                  title: "ƒê·ªçc s√°ch üìö"
      responses:
        '201':
          description: Todo created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TodoResponse'
              example:
                success: true
                data:
                  id: 3
                  title: "Ho√†n th√†nh project"
                  completed: false
                  created_at: "2026-02-10T12:00:00Z"
                  updated_at: "2026-02-10T12:00:00Z"
                message: "Todo created successfully"
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
              examples:
                emptyTitle:
                  summary: Ti√™u ƒë·ªÅ tr·ªëng
                  value:
                    success: false
                    message: "Validation failed"
                    errors:
                      title:
                        - "Ti√™u ƒë·ªÅ l√† b·∫Øt bu·ªôc"
                titleTooLong:
                  summary: Ti√™u ƒë·ªÅ qu√° d√†i
                  value:
                    success: false
                    message: "Validation failed"
                    errors:
                      title:
                        - "Ti√™u ƒë·ªÅ ph·∫£i c√≥ t·ªëi ƒëa 255 k√Ω t·ª±"

  /todos/{id}:
    parameters:
      - $ref: '#/components/parameters/TodoId'

    get:
      summary: L·∫•y th√¥ng tin m·ªôt todo
      description: Tr·∫£ v·ªÅ th√¥ng tin chi ti·∫øt c·ªßa m·ªôt todo c·ª• th·ªÉ
      operationId: getTodo
      tags:
        - Todos
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TodoResponse'
              example:
                success: true
                data:
                  id: 1
                  title: "Mua s·ªØa"
                  completed: false
                  created_at: "2026-02-10T10:00:00Z"
                  updated_at: "2026-02-10T10:00:00Z"
                message: "Todo retrieved successfully"
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      summary: C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ todo
      description: C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ c·ªßa todo hi·ªán c√≥
      operationId: updateTodo
      tags:
        - Todos
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTodoRequest'
            example:
              title: "Mua s·ªØa t∆∞∆°i organic"
      responses:
        '200':
          description: Todo updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TodoResponse'
              example:
                success: true
                data:
                  id: 1
                  title: "Mua s·ªØa t∆∞∆°i organic"
                  completed: false
                  created_at: "2026-02-10T10:00:00Z"
                  updated_at: "2026-02-10T13:00:00Z"
                message: "Todo updated successfully"
        '404':
          $ref: '#/components/responses/NotFoundError'
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
              example:
                success: false
                message: "Validation failed"
                errors:
                  title:
                    - "Ti√™u ƒë·ªÅ l√† b·∫Øt bu·ªôc"

    delete:
      summary: X√≥a todo
      description: X√≥a vƒ©nh vi·ªÖn m·ªôt todo kh·ªèi database
      operationId: deleteTodo
      tags:
        - Todos
      responses:
        '200':
          description: Todo deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                success: true
                message: "Todo deleted successfully"
        '404':
          $ref: '#/components/responses/NotFoundError'

  /todos/{id}/toggle:
    parameters:
      - $ref: '#/components/parameters/TodoId'

    patch:
      summary: Chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i ho√†n th√†nh
      description: ƒê·∫£o ng∆∞·ª£c tr·∫°ng th√°i completed c·ªßa todo (true ‚Üî false)
      operationId: toggleTodo
      tags:
        - Todos
      responses:
        '200':
          description: Todo toggled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TodoResponse'
              examples:
                completedToUncompleted:
                  summary: T·ª´ completed ‚Üí uncompleted
                  value:
                    success: true
                    data:
                      id: 1
                      title: "Mua s·ªØa"
                      completed: false
                      created_at: "2026-02-10T10:00:00Z"
                      updated_at: "2026-02-10T14:00:00Z"
                    message: "Todo completion toggled successfully"
                uncompletedToCompleted:
                  summary: T·ª´ uncompleted ‚Üí completed
                  value:
                    success: true
                    data:
                      id: 1
                      title: "Mua s·ªØa"
                      completed: true
                      created_at: "2026-02-10T10:00:00Z"
                      updated_at: "2026-02-10T14:00:00Z"
                    message: "Todo completion toggled successfully"
        '404':
          $ref: '#/components/responses/NotFoundError'

components:
  parameters:
    TodoId:
      name: id
      in: path
      required: true
      description: Todo ID (unique identifier)
      schema:
        type: integer
        format: int64
        minimum: 1
      example: 1

  schemas:
    Todo:
      type: object
      required:
        - id
        - title
        - completed
        - created_at
        - updated_at
      properties:
        id:
          type: integer
          format: int64
          description: Unique identifier
          example: 1
        title:
          type: string
          minLength: 1
          maxLength: 255
          description: Ti√™u ƒë·ªÅ todo
          example: "Mua s·ªØa"
        completed:
          type: boolean
          description: Tr·∫°ng th√°i ho√†n th√†nh
          example: false
        created_at:
          type: string
          format: date-time
          description: Th·ªùi ƒëi·ªÉm t·∫°o (ISO 8601)
          example: "2026-02-10T10:00:00Z"
        updated_at:
          type: string
          format: date-time
          description: Th·ªùi ƒëi·ªÉm c·∫≠p nh·∫≠t cu·ªëi (ISO 8601)
          example: "2026-02-10T10:00:00Z"

    CreateTodoRequest:
      type: object
      required:
        - title
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 255
          description: Ti√™u ƒë·ªÅ todo
          example: "H·ªçc Vue 3"

    UpdateTodoRequest:
      type: object
      required:
        - title
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 255
          description: Ti√™u ƒë·ªÅ m·ªõi cho todo
          example: "H·ªçc Vue 3 Composition API"

    TodoResponse:
      type: object
      required:
        - success
        - data
        - message
      properties:
        success:
          type: boolean
          example: true
        data:
          $ref: '#/components/schemas/Todo'
        message:
          type: string
          example: "Todo created successfully"

    TodoListResponse:
      type: object
      required:
        - success
        - data
        - message
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          items:
            $ref: '#/components/schemas/Todo'
        message:
          type: string
          example: "Todos retrieved successfully"

    SuccessResponse:
      type: object
      required:
        - success
        - message
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Operation completed successfully"

    ValidationErrorResponse:
      type: object
      required:
        - success
        - message
        - errors
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Validation failed"
        errors:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
          example:
            title:
              - "Ti√™u ƒë·ªÅ l√† b·∫Øt bu·ªôc"

    NotFoundErrorResponse:
      type: object
      required:
        - success
        - message
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Todo not found"

  responses:
    NotFoundError:
      description: Todo not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotFoundErrorResponse'
          example:
            success: false
            message: "Todo not found"
